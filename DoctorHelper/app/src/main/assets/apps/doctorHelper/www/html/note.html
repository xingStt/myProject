<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>便签</title>
    <link rel="stylesheet" href="../css/mui.min.css" />
    <link rel="stylesheet" href="../css/mui.picker.min.css" />
    <link rel="stylesheet" href="../css/note.css" />
    <script type="text/javascript" src="../script/mui.min.js"></script>
    <script type="text/javascript" src="../script/zepto.min.js"></script>
    <script type="text/javascript" src="../script/Url.js" ></script>
    <script type="text/javascript" src="../script/mui.picker.min.js" ></script>
    <script type="text/javascript" src="../script/date_format.js" ></script>
    <script type="text/javascript" src="../script/android_source.js" ></script>
    <style>
		.anniu{
			margin: 0 auto;
		}

	</style>
</head>
<body>
<header id="header" class="mui-bar mui-bar-nav">
    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: #FFF;"></a>
    <span id="deleteCaCheBtn" class="mui-title" style="color: #FFF;font-size: 1.1rem;">便签</span>
    <a id="btnComplete" style="color: #FFF;float: right;margin-top: 0.8rem;">提交</a>
</header>
<div>
    <div id="navTitle">
        <div id="navLeft">
            <div class="dateclear">
                <button id='begindate' date-potion="" class="timebtn">点我选择日期</button>
                <div class="icon-clear">
                    重置
                </div>
            </div>
            <div style="float: right;width: 60%;" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
                <div id="file_type_div" style="line-height: 80px;" class="mui-scroll">
                    <a id="" class="mui-control-item mui-active">
                        全部
                    </a>
                    <a id="text" data_box="notebox" class="mui-control-item">
                        文字
                    </a>
                    <a id="picture" data_box="photobox" class="mui-control-item">
                        图片
                    </a>
                    <a id="vedio" data_box="videobox" class="mui-control-item">
                        录像
                    </a>
                    <a id="audio" data_box="recordbox" class="mui-control-item">
                        录音
                    </a>
                </div>
            </div>
        </div>
        <div id="navRight"  align="right">
            <a id="camera" class="mui-icon mui-icon-camera"></a>
            <a id="video" class="mui-icon mui-icon-videocam"></a>
            <a id="recordBtn" class="mui-icon mui-icon-mic"></a>
        </div>
    </div>
    <div id="note_div" class="mui-content">
        <div style="margin-top: 3px;overflow: auto;">
            <div style="float: left;width: 90%;">
                <textarea id="note" rows="2" placeholder="请输入文字"></textarea>
            </div>
            <div style="float: left;">
                <a id="upload_text" style="font-size: 40px;line-height: 50px;" class="mui-icon mui-icon-upload"></a>
            </div>
        </div>
        <div id="note_content" style="width: 100%;">
            <div id="notebox" style="display: none;overflow: auto;">
            </div>
            <div id="photobox" style="display: none;overflow: auto;">
            </div>
            <div id="videobox" style="display: none;overflow: auto;">
            </div>
            <div id="recordbox" style="display: none;overflow: auto;">
            </div>
        </div>
    </div>
    <div id="record" class="rp" >
        <div style="width:100%;height:40%;"></div>
        <div id="rtime" class="rtime">00:00:00</div><br/>
        <div class="anniu">
            <!--<div class="stop deleteR" onclick="deleteRecord()">删除</div>
            <div id="recordDiv"  class="start">start</div>
            <div class="stop"  onclick="saveRecord()">保存</div>-->
            <span style="margin-right: 50px;" class="mui-icon mui-icon-shanchu" onclick="deleteRecord()"></span>
            <span id="recordDiv" class="mui-icon mui-icon-kaishi"></span>
            <span style="margin-left: 50px;" class="mui-icon mui-icon-baocun" onclick="saveRecord()"></span>
        </div>

    </div>
    <div id="picture_popover" class="mui-popover mui-popover-action mui-popover-bottom">
        <ul class="mui-table-view">
            <li class="mui-table-view-cell">
                <a id="btnCamera" href="javascript:void(0)">拍照</a>
            </li>
            <li class="mui-table-view-cell">
                <a id="btnAlbum" href="javascript:void(0)">选取现有照片</a>
            </li>
        </ul>
        <ul class="mui-table-view">
            <li class="mui-table-view-cell">
                <a id="btnCancel" href="#picture_popover"><b>取消</b></a>
            </li>
        </ul>
    </div>
</div>
</body>

</html>
<script type="text/javascript">
	mui.init({
		gestureConfig:{
			longtap: true //默认为false
		}
	});
	var Url_st="http://192.168.23.1:8280";
	var gentry = null;
	var er = null;
	var audioCount = 0;
	var audios = []; //连续录音的录音路径数组
	var audioPath = null; //当前录音路径
	var photoCount = 0;
	var photos = [];
	var videoCount = 0;
	var videos = [];
	var tapname;//点击的按钮名称
	var date_time="";//选择的时间
	var file_type="";//选择的类型
	var curtime =0;//视频当前播放时间
	// 开始录音
	var r = null,
		t = 0,
		ri = null, //定时器
		rt = null; //录音时间
	document.addEventListener('DOMContentLoaded', function() {
		// 获取DOM元素对象
		er = document.getElementById('record');
		rt = document.getElementById('rtime');
	}, false);
	var patientid =  localStorage.getItem("patientid");//病人id
	var empid =	 localStorage.getItem("loginid");//医生id
	mui.plusReady(function() {
		loadData(date_time,file_type);
		// 获取音频目录对象
		plus.io.resolveLocalFileSystemURL('_doc/', function(entry) {
			entry.getDirectory('audio', {
				create: true
			}, function(dir) {
				gentry = dir;
			}, function(e) {
				mui.toast('Get directory "audio" failed: ' + e.message);
			});
		}, function(e) {
			mui.toast('Resolve "_doc/" failed: ' + e.message);
		});
		//获取图片目录
		plus.io.resolveLocalFileSystemURL('_doc/', function(entry) {
			entry.getDirectory('camera', {
				create: true
			}, function(dir) {
				gentry = dir;
			}, function(e) {
			});
		}, function(e) {
		});
		//获取视频目录
		plus.io.resolveLocalFileSystemURL('_doc/', function(entry) {
			entry.getDirectory('video', {
				create: true
			}, function(dir) {
				gentry = dir;
			}, function(e) {
				mui.toast('Get directory "video" failed: ' + e.message);
			});
		}, function(e) {
			mui.toast('Resolve "_doc/" failed: ' + e.message);
		});
	})

	//点击日期选择填出选择器
	var dtpicker = new mui.DtPicker({
	    type: "date"//设置日历初始视图模式
	})
	$(".timebtn").bind('tap',function(){
		var id=$(this).attr("id");
		dtpicker.show(function(selectItems) {//选择时间后的事件处理
			var	time=selectItems.y.value+"-"+selectItems.m.value+"-"+selectItems.d.value
			$("#"+id).html(time);
			$("#"+id).attr("date-potion",time);
			date_time = time;
			loadData(date_time,file_type);
			$(".icon-clear").css("display","block");
		})
	});
	//当前日期年月日
	var now_date = new Date().Format("yyyy-MM-dd");
	$("#begindate").html(now_date);
	$(".icon-clear").bind('tap',function(){
		$("#begindate").html(now_date);
		$("#begindate").attr("date-potion","");
		$(this).css("display","none");
		loadData(now_date,file_type);
	});
	var boxlist=["notebox","photobox","videobox","recordbox"];
	//点击选择显示文件类型(全部、文字、图片、录像、录音)
	$("#file_type_div").find('a').bind('tap',function(){
		var data_box = $(this).attr("data_box");
		$.each(boxlist, function() {//对应类型显示块的显示和隐藏
			if(this==data_box){
				$(this).show();
			}else{
				$("#"+this).hide();
			}
		});
		file_type = $(this).attr("id");
		loadData(date_time,file_type);
	});
	//上传便签文字内容
	$("#upload_text").bind('tap',function(){
		if($("#note").val()!=""){
			uploadFile("","text");
			$("#note").val("");
		}else{
			mui.toast("文字不能为空");
			return;
		}
	});
	//根据病人id获取便签内容
	function loadData(date_time,file_type){
		mui.ajax(Url_+'/deskNurse/doctor/getNotesByPatientId.do',{
			data:{'patientid':patientid,
				  'date':date_time,
				  'file_type':file_type},
			dataType:'json',
			type:'post',
			success:function(data){
				var notes = data.notes;
				var note_files = data.note_files;
				loadDataToHtml(notes,note_files)
			}
		})
	}
	//便签内容展示
	function loadDataToHtml(notes,note_files){
		$.each(boxlist, function() {//对应类型显示块的显示和隐藏
			$("#"+this).hide();
		});
		$("#note").html("");
		$("#notebox").html("");
		$("#photobox").html("");
		$("#videobox").html("");
		$("#recordbox").html("");
		var html="";
		if(notes){
			for(var i=0;i<notes.length;i++){
				if(notes[i].note){
					$("#notebox").css('display','block');
					html='<div id="t_'+notes[i].id+'"><span class="blue-">-&nbsp;</span><span>'+notes[i].note+'</span>';
					if(empid==notes[i].empid){
						html+='<a class="mui-icon mui-icon-closeempty deleteText" data_str='+notes[i].id+'></a>'
					}
					html+='</br></div>';
					$("#notebox").append(html);
					//删除便签文字
					$('#t_'+notes[i].id).find('.deleteText').on('tap', function() {
						var _this = $(this).parent();
						deleteText(_this,$(this).attr("data_str"));
					});
				}
			}
		}
		if(note_files){
			for(var i=0;i<note_files.length;i++){
				//文件数据库的路径
				var filePathName = note_files[i].file_name;
				var index = filePathName.lastIndexOf("\/");
				//文件名称和后缀
				var fileName = filePathName.substring(index + 1, filePathName.length);
				if("picture" == note_files[i].file_type) {
					$("#photobox").css('display','block');
					$("#photobox").append('<div style="float: left;position:relative;margin-left:0.2rem">' +
					'<img onClick="displayPhoto(\''+Url_st+note_files[i].file_name+'\')" width="100px" height="100px" src="' + Url_st+note_files[i].file_name + '"></span></div>');
				}
				if("vedio" == note_files[i].file_type) {
					var poster = note_files[i].poster;
				    $("#videobox").css('display','block');
					var iindex=fileName.lastIndexOf(".");
					//视频名称(无后缀)
					var videoid=fileName.substring(0,iindex);
					//本地是否存在视频
					isExitVideoFile(videoid,fileName, filePathName,poster);
				}
				if("audio" == note_files[i].file_type) {
					$("#recordbox").css('display','block');
					$("#recordbox").append('<audio controls="controls" src="'+Url_st+note_files[i].file_name+'"></audio>');
				}
			}
		}
	}
	//点击×删除便签文字
	function deleteText(_this,noteid){
		var btnArray = ['是', '否'];
		mui.confirm('确认删除文字',"" , btnArray, function(e) {
			if(e.index == 0) {
				deleteNoteByNoteid(noteid);
				_this.remove();
			}else{
				return;
			}
		})
	}
	//删除数据库便签文字
	function deleteNoteByNoteid(noteid){
		mui.ajax(Url_+'/deskNurse/doctor/deleteNoteByNoteid.do',{
			data:{noteid:noteid},
			type:"post",
			dataType:'json',
			success:function(){
			}
		});
	}
	/**本地是否存在视频文件
	 * @param {Object} videoid 视频id
	 * @param {Object} fileName 视频文件名
	 * @param {Object} filePathName 视频在数据库的路径
	 * @param {Object} poster 视频预览图路径
	 */
	function isExitVideoFile(videoid,fileName, filePathName,poster) {
		$("#videobox").append('<div class="videoBorder" style="float: left;"><video id="'+videoid+'" width="200px" height="200px" controls="controls" poster="'+Url_st+poster+'"></video><a class="mui-icon mui-icon-fangda fullScreen '+videoid+'"></a></div>');
		parent.plus.io.resolveLocalFileSystemURL('_doc/video/' + fileName, function(entry) {
			//本地存在视频文件
			var localpath = parent.plus.io.convertLocalFileSystemURL('_doc/video/' + fileName);
			$("#"+videoid).attr("src",localpath);
			$("."+videoid).unbind('tap');
			$("."+videoid).bind('tap',function(){
			    curtime = document.getElementById(videoid).currentTime;
				plus.fullScreen.startPlay(localpath,curtime);
			})
		}, function(e) {
			$("#"+videoid).attr("src",Url_st+filePathName);
			//点击播放按钮的时候下载文件
			$("#"+videoid).bind('play',function(){
				downLoadFile(Url_st + filePathName,fileName,videoid);
			});
			$("."+videoid).unbind('tap');//解绑tap时间，不然可能会多次播放
			$("."+videoid).bind('tap',function(){
			    curtime = document.getElementById(videoid).currentTime;
				plus.fullScreen.startPlay(Url_st+filePathName,curtime);
			})
		});
	}

	//上传文件
	function uploadFile(file,type){
		var note = 　document.getElementById("note").value;
		var task = plus.uploader.createUpload(Url_ + "/deskNurse/doctor/uploadNote.do", {
				method: "POST"
			},
			function(t, status) { //上传完成
				if(status == 200) {
					if(type=="text"){
						loadData(date_time,file_type);
					}
				} else {
					mui.toast("文件上传失败");
				}
			}
		);
		if(type=='text'){
			task.addData('note', note);
		}
		task.addData('empid', empid);
		task.addData('patientid', patientid);
		task.addFile(file.path, {
			key: file.name
		});
		if(type=='video'){//如果上传类型为video的话，同时上传video的预览图
			task.addFile(file.posterpath,{
				key:file.postername
			})
		}
		task.start();
	}
	//服务器下载视频文件到本地
	function downLoadFile(path,fileName,videoid){
		parent.plus.io.resolveLocalFileSystemURL('_doc/video/' + fileName, function(entry) {
			//本地存在视频文件
		}, function(e) {//本地不存在文件，下载文件到本地
			var dtask = parent.plus.downloader.createDownload(path, {
				filename: '_doc/video/' + fileName
			}, function(d, status) {
				// 下载完成
				if(status == 200) {
					var video = document.getElementById(videoid);
					var currentTime  = video.currentTime;
					$("#"+videoid).attr("src",parent.plus.io.convertLocalFileSystemURL('_doc/video/'+fileName));
					video.currentTime=currentTime;
					video.play();
					$("."+videoid).unbind('tap');
          			$("."+videoid).bind('tap',function(){
          			    curtime = currentTime;
          				plus.fullScreen.startPlay(parent.plus.io.convertLocalFileSystemURL('_doc/video/'+fileName),curtime);
        			});
				} else {
				}
			});
			dtask.start();
		})
	}

	$("#deleteCaCheBtn").bind('tap',function(){
		mui.confirm('确认删除缓存','',['是','否'],function(e){
			if(e.index==0){
				plus.io.resolveLocalFileSystemURL('_doc/', function(entry) {
					entry.removeRecursively(function(entry){
						mui.toast("删除成功");
					},function(){
						mui.toast("删除失败");
					})
				}, function(e) {
					mui.toast("本地目录不存在");
				});
			}
		})
	});



	//点击照相机图标
	$('#camera').on('tap', function() {
		tapname=$(this).attr("id");
		//显示拍照和从相册选择弹出框
		mui('#picture_popover').popover('show');
	});
	$("#btnCamera").bind('tap', function() {
	   plus.localCamera.startCamera(function(result){
	        showPic(result)
	    },function(e){
	    });
		//UCam();
		mui('#picture_popover').popover('hide');
	});
	$("#btnAlbum").bind('tap', function() {
		galleryPic("vedio");
		mui('#picture_popover').popover('hide');
	});
	//录像
	$("#video").bind('tap',function(){
		tapname =  $(this).attr("id");
		plus.mediaRecorder.startRecorder(function(result){
			var  pathS =  result;
			var pathL = result.split("@");
			var videoPath = pathL[0];
			var poster = pathL[1];
			showVideo(videoPath,poster);
		},function(code){
		});
	});
	//录音
	$("#recordDiv").bind('tap',function(){
		startRecord();
		$(this).hide();
		/*if($(this).hasClass('start')) {
			$(this).removeClass('start');
			$(this).addClass('stop');
			startRecord();
		} else {
			$(this).removeClass('stop');
			$(this).addClass('start');
			stopRecord();
		}*/
	});
	$("#recordBtn").bind('tap', function() {
		tapname=$(this).attr("id");
		showRecord();
	});

	//拍照
	function UCam() {
		plus.camera.getCamera().captureImage(function(p) {
			showPic(p)
		}, function(e) {
			console.info("失败：" + e.message);
		}, {
			filename: "_doc/camera/",
			index: 1
		});
	}
	//从相册选择图片
	function galleryPic(type) {
		plus.gallery.pick(function(e) {
			var fiLength = e.files.length;
			for(var i = 0; i < fiLength; i++) {
				showPic(e.files[i]);
			}
		}, function(e) {
			console.info("取消选择");
		}, {
			filter: type,
			system: true,
			multiple: true
		})
	}
	//压缩展示图片
	function showPic(imgurl) {
		var pt = imgurl;
		plus.zip.compressImage({
			src: pt,
			dst: pt,
			quality: 100,
			overwrite: true,
			format: "png",
			width: "800px",
			height: "1280px"
		}, function(e) {
			var path = plus.io.convertLocalFileSystemURL(e.target);
			var photo = {
				name: pt,
				path: path
			}
			$("#photobox").css('display','block');
			$("#photobox").append('<div style="float: left;position:relative;margin-left:0.2rem" id="p_' + photoCount + '">' +
				'<img class="p_' + photoCount + '" width="100px" height="100px" src="' + path + '"><span class="mui-icon mui-icon-closeempty"></span></div>');
			//删除图片(本地的图片还在)
			$('#p_' + photoCount).find('span').on('tap', function() {
				var _this = $(this).parent();
				deletp(_this,photoCount,photo);
			});
			//点击小图片显示图片大图
			$('.p_' + photoCount).bind('tap', function() {
				displayPhoto(photo.path);
			});
			//长按删除照片
			$('#p_' + photoCount).find('img').bind('longtap', function() {
				var _this = $(this).parent();
				deletp(_this,photoCount,photo);
			});
			uploadFile(photo,'photo');
			photos.push(photo);
			photoCount++;
		}, function() {});
	}
	function deletp(_this,photoCount,photo){
		var btnArray = ['是', '否'];
		mui.confirm('确认删除照片',"" , btnArray, function(e) {
			if(e.index == 0) {
				_this.remove();
				deleteNoteFile(photo.path);
				photos.remove(photo);
			}else{
				return;
			}
		})
	}
	function deleteNoteFile(path){
		var index = path.lastIndexOf("\/");
		//文件名称和后缀
		var fileName = path.substring(index + 1, path.length);
		mui.ajax(Url_+'/deskNurse/doctor/deleteNoteFile.do',{
			data:{'fileName':fileName},
			dataType:'json',
			type:"post",
			success:function(data){
				if(data>0){

				}else{
					mui.toast("删除失败");
				}
			}
		})
	}
	// 显示文件大图
	function displayPhoto(path) {
		mui.openWindow({
			url: '../showPic.html',
			id: 'showPic',
			preload: false,
			extras: {
				path: path
			},
			show: {
				aniShow: 'pop-in'
			},
			styles: {
				popGesture: 'hide',
				scalable: true
			},
			waiting: {
				autoShow: true
			}
		})
	}
	//摄像后显示视频
	function showVideo(videoUrl,posterUrl) {
		var name = videoUrl;
		var path = plus.io.convertLocalFileSystemURL(videoUrl);

		var postername = posterUrl;
		var posterpath = plus.io.convertLocalFileSystemURL(posterUrl);

		var index = path.lastIndexOf("\/");
		//文件名称和后缀
		var fileName = path.substring(index + 1, path.length);
		var iindex=fileName.lastIndexOf(".");
		//视频名称(无后缀)
		var videoid=fileName.substring(0,iindex);
		var video = {
			name: name,
			path: path,
			postername:postername,
			posterpath:posterpath
		};
		uploadFile(video,'video');
		videos.push(video);
		$("#videobox").css('display','block');
		$("#videobox").append('<div class="videoBorder" style="float: left;" id="v_' + videoCount + '"><span class="mui-icon mui-icon-closeempty close"></span>' +
			'<video id="'+videoid+'" width="200px" height="200px" controls="controls" src="'+ path+'" poster="'+posterpath+'"></video><a  class="mui-icon mui-icon-fangda fullScreen '+videoid+'"></a></div>');
		$('#v_' + videoCount).find('span').on('tap', function() {
			var _this = $(this).parent();
			deleteV(_this,video,path);
		});
		videoCount++;
		//点击全屏按钮
		$("."+videoid).bind('tap',function(){
		    curtime = document.getElementById(videoid).currentTime;
			plus.fullScreen.startPlay(path,curtime);
		});
	}
	<!--删除视频-->
	function deleteV(_this,video,path){
		var btnArray = ['是', '否'];
		mui.confirm('确认删除视频',"" , btnArray, function(e) {
			if(e.index == 0) {
				_this.remove();
				deleteNoteFile(path);
				videos.remove(video);
			}else{
				return;
			}
		})
	}

	<!--开始录音模块-->
	//显示录音界面
	function showRecord() {
		er.style.display = 'block';
	}
	//开始录音
	function startRecord() {
		r = plus.audio.getRecorder();
		if(r == null) {
			mui.toast('录音对象未获取');
			return;
		}
		r.record({
			filename: '_doc/audio/'
		}, function(p) {
			audioPath = p;
		}, function(e) {
			mui.toast('录音失败:' + e.message);
		});
		t = 0;
		ri = setInterval(function() {
			t++;
			rt.innerText = timeToStr(t);
		}, 1000);
	}
	//删除录音
	function deleteRecord() {
		clearInterval(ri);
		if(r) {
			r.stop();
		}
		setTimeout(function() {
			mui.confirm('确认删除该' + audioPath + '条记录？', '', ['确认', '取消'], function(e) {
				if(e.index == 0) {
					deleteRecordEvent();
				} else {
					$("#recordDiv").show();
				}
			});
		}, 500);
	}
	// 停止录音
	function stopRecord() {
		clearInterval(ri);
		ri = null;
		r.stop();
		r = null;
		t = 0;
	}
	//保存录音
	function saveRecord() {
		clearInterval(ri);
		if(r) {
			r.stop();
		}
		setTimeout(function() {
			mui.confirm('确认保存' + audioPath, '', ['保存', '放弃'], function(e) {
				if(e.index == 0) {
					var path = plus.io.convertLocalFileSystemURL(audioPath)
					var audio={
							name: audioPath,
							path: path
						}
					uploadFile(audio,'audio');
					$("#recordbox").css('display','block');
					$("#recordbox").append('<p style="float: left;" id="a_' + audioCount + '">"a_' + audioCount + '"<span class="mui-icon mui-icon-closeempty">' +
						'</span><audio controls="controls" src='+path+'>您的浏览器不支持 audio 标签。</audio></p>');
					$('#a_' + audioCount).find('span').on('tap', function() {
						$(this).parent().remove();
						audios.remove(audio);
					});
					audios.push(audio);
					audioCount++;
					closeEvent();
				} else {
					$("#recordDiv").show();
					deleteRecordEvent();
				}
			});
		}, 500);
	}
	// 重写关闭
	mui.back = function() {
		if(er.style.display == 'block') {
			closeEvent();
		} else {
			plus.webview.currentWebview().close();
		}
	}
	//删除录音进行的操作
	function deleteRecordEvent() {
		plus.io.resolveLocalFileSystemURL(audioPath, function(entry) {
			entry.remove(function(e) {
				rt.innerText = '00:00:00';
			}, function() {
				mui.toast("删除失败")
			});
		})
	}
	//关闭录音界面的操作
	function closeEvent() {
		$("#record").css("display", "none");
		rt.innerText = '00:00:00';
		clearInterval(ri);
		if(r) {
			r.stop();
		}
		$("#recordDiv").show();
		/*if($("#recordDiv").hasClass('stop')) {
			$("#recordDiv").removeClass('stop');
			$("#recordDiv").addClass('start');
		}*/
	}
	<!--结束录音模块-->

	// 格式化时长字符串，格式为"HH:MM:SS"
	timeToStr = function(ts) {
		if(isNaN(ts)) {
			return "--:--:--";
		}
		var h = parseInt(ts / 3600);
		var m = parseInt((ts % 3600) / 60);
		var s = parseInt(ts % 60);
		return(ultZeroize(h) + ":" + ultZeroize(m) + ":" + ultZeroize(s));
	};
	ultZeroize = function(v, l) {
		var z = "";
		l = l || 2;
		v = String(v);
		for(var i = 0; i < l - v.length; i++) {
			z += "0";
		}
		return z + v;
	};
	//找出数组元素下标
	Array.prototype.indexOf = function(val) {
		for(var i = 0; i < this.length; i++) {
			if(this[i] == val) return i;
		}
		return -1;
	};
	//删除指定元素
	Array.prototype.remove = function(val) {
		var index = this.indexOf(val);
		if(index > -1) {
			this.splice(index, 1);
		}
	};
</script>